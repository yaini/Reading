# 12.1 스프링 데이터 JPA 소개

데이터 접근 계층을 개발할 때 반복되는 CRUD 문제 해결

레포지토리를 개발할 때 인터페이스를 작성해주면 JPA가 구현 객체를 동적으로 생성해서 주입

데이터 접근 계층을 개발할 때 구현 클래스 없이 인터페이스만 작성해도 개발을 완료할 수 있음

# 12.2 스프링 데이터 JPA 설정

@EnableJpaRepositories 를 통해 basePackages를 설정

스프링에선 인터페이스들을 찾아서 클래스를 동적으로 생성한 다음 스프링 빈으로 등록

# 12.4 쿼리 메소드 기능

메소드의 이름만으로 쿼리를 생성함

### 스프링 데이터 JPA가 제공하는 쿼리 메소드 기능

- 메소드 이름으로 쿼리 생성
- 메소드 이름으로 JPA NamedQuery 호출
- @Query 어노테이션을 사용해서 레포지토리 인터페이스에 쿼리 직접 정의

## 12.4.5 벌크성 수정 쿼리

스프링 데이터 JPA에서 벌크성 쿼리를 실행 후 영속성 컨텍스트를 초기화하고 싶다면

@Modifying의 clearAutomatically 옵션을 주면 된다.

## 12.4.7 페이징과 정렬

스프링 데이터 JPA는 쿼리 메소드에 페이징과 정렬 기능을 사용할 수 있도록 파라미터 제공

- org.springframework.data.domain.Sort
- org.springframework.data.domain.Pageable

# 12.6 사용자 정의 레포지토리 구현

인터페이스를 구현한 클래스 이름을 에포지토리 인터페이스 이름+Impl로 작성한다.

Impl로 스프링 데이터 JPA가 사용자 정의 구현 클래스로 인식

Impl 대신 다른 이름 사용지 repositoryImplementationPostfix 옵션 변경

# 12.8 스프링 데이터 JPA가 사용하는 구현체

### @Repository 적용

JPA 예외를 스프링이 추상화한 예외로 변환한다.

### @Transactional 트랜잭션 적용

JPA의 모든 변경은 트랜잭션 안에서 이루어져야 한다.

스프링 데이터 JPA가 제공하는 공통 인터페이스를 사용하면 데이터를 변경하는 메소드에 모두 트랜잭션 처리가 되어 있음

### save 메소드

저장할 엔티티가 새로운 엔티티면 저장하고 이미 있는 엔티티면 병합
