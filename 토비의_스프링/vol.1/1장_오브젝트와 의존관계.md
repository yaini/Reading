# 1.1 초난감 DAO

- **DAO**: DB를 사용해 데이터를 조회하거나 조작하는 기능을 전담하도록 만든 오브젝트
- **자바빈**: 디폴트 생성자, 프로퍼티를 가지는 오브젝트

# 1.2 DAO의 분리

- **관심사 분리**:  관심이 같은 것끼리는 하나의 객체 안으로 모이게 하고,

    관심이 다른 것은 가능한 한 따로 떨어져 서로 영향을 주지 않도록 분리하는 것

## 1.2.2 커넥션 만들기의 추출

### Dao의 관심사항

- DB와 연결을 위한 커넥션을 어떻게 가져올까
- DB에 보낼 SQL문장을 만들고 실행
- 공유 리소스를 시스템에 돌려줌

- **리팩토링**: 기존의 코드를 외부의 동작방식에는 변화 없이 내부 구조를 변경해서 재구성하는 작업

## 1.2.3 DB 커넥션 만들기의 독립

### 템플릿 메소드 패턴

슈퍼클래스에서 기본적인 로직의 흐름과 기능의 일부를 오버라이딩이 가능한 메소드로 만들고

서브클래스에서 이런 메소드를 필요에 맞게 구현하여 사용하는 디자인 패턴

변하지 않는 기능은 슈퍼클래스에, 자주 변경되고 확장되는 기능은 서브클래스에서 구현

제어의 역전을 활용한 디자인 패턴

- hook 메소드: 서브클래스에서 선택적으로 오버라이드 할 수 있도록 만든 메소드

### 팩토리 메소드 패턴

템플릿 메소드 패턴과 마찬가지로 상속을 통해 기능을 확장하게 하는 디자인 패턴

슈퍼클래스 코드에서는 서브클래스에서 구현할 메소드를 호출해서 필요한 타입의 오브젝트를 가져와 호출함

서브클래스에서 구체적인 오브젝트 **생성 방법**을 결정하게 함

팩토리 메소드와 팩토리 메소드 패턴의 팩토리 메소드는 다른 의미이므로 주의

# 1.3 DAO의 확장

## 1.3.4 원칙과 패턴

### 개방 폐쇄 원칙

클래스나 모듈은 확장에는 열려있어야 하고 변경에는 닫혀 있어야 한다.

### 객체지향 설계 원칙(SOLID)

- SRP: 단일 책임 원칙
- OCP: 개방 폐쇄 원칙
- LSP: 리스코프 치환 원칙
- ISP: 인터페이스 분리 원칙
- DIP: 의존 관계 역전 원칙

### 높은 응집도와 낮은 결합도

- 높은 응집도: 하나의 모듈, 클래스가 하나의 책임 또는 관심사에만 집중되어 있다
- 낮은 결합도: 책임과 관심사가 다른 오브젝트 또는 모듈과 느슨하게 연결되어 있다.

### 전략 패턴

자신의 기능 맥락에서, 필요에 따라 변경이 필요한 알고리즘을 인터페이스를 통해 외부로 분리시키고 이를 구현한 구체적인 알고리즘 클래스를 필요에 따라 바꿔서 사용할 수 있게 하는 디자인 패턴

# 1.4 제어의 역전(IoC)

오브젝트가 자신이 사용할 오브젝트를 스스로 선택/생성하지 않는다.

모든 제어 권한을 자신이 아닌 다른 대상에게 위임한다.

## 1.4.1 오브젝트 팩토리

### 팩토리

객체의 생성 방법을 결정하고 그렇게 만들어진 오브젝트를 돌려주는 클래스

오브젝트를 생성하는 쪽과 생성된 오브젝트를 사용하는 쪽의 역할과 책임을 분리

어플리케이션을 구성하는 컴포넌트의 구조와 관계를 정의

## 1.4.3 제어권 이전을 통한 제어관계 역전

ex) 서블릿, 템플릿 메소드 패턴, 프레임워크

- 프레임 워크 vs 라이브러리

    라이브러리를 사용하면 어플리케이션이 직접 흐름을 제어하지만.

    프레임 워크는 거꾸로 어플리케이션의 코드가 프레임워크에 의해 사용된다.

# 1.5 스프링의 IoC

## 1.5.1 오브젝트 팩토리를 이용한 스프링 IoC

- 빈: 스프링이 제어권을 가지고 직접 만들고 관계를 부여하는 오브젝트, 제어의 역전 적용
- 빈팩토리: 빈의 생성과 관계설정 같은 제어를 담당하는 IoC 오브젝트
- 어플리케이션 컨텍스트: IoC 방식을 따라 빈팩토리를 확장

### DaoFactory를 사용하는 어플리케이션 컨텍스트

@Configuration: 빈팩토리를 위한 오브젝트 설정을 담당하는 클래스

@Bean: 오브젝트를 만들어주는 메소드
